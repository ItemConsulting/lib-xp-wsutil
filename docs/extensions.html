<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Extensions</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">



    



    


    <h3> </h3>










    




    <section>
        <article><h1>Creating extensions</h1><p>Create websokcet extensions to speed up your development process when working with the websocket utility library.
It is both easy and fun.</p>
<p>And if you create something you think is useful for others, share it.</p>
<h2>Basic server extension</h2><p>Extend functionality by adding additional handlers.</p>
<p>Say we want to create a simple logger for our application</p>
<p>In our <code>/lib/wsLogger.js</code> file we could add our logger</p>
<pre class="prettyprint source lang-javascript"><code>var ws = require('/lib/wsUtil');
var http = require('/lib/xp/http-client');

ws.extend({ 'logger': logger});
exports.logger = ws;
function logger() {
  ws.addHandlers('open', function(e) {
    http.request({
        method: 'POST',
        body: JSON.stringify({ logItem: e, event: 'open', ts: Date.now() }),
        ... // Additional request params
    });
  })
  ... // Additional handlers
}</code></pre><p>Use </p>
<pre class="prettyprint source lang-javascript"><code>// service/websocket
var wsl = require('logger').logger;
wsl.logger();
wsl.openWebsockets();</code></pre><h2>Basic client extension</h2><p>Extend the client library</p>
<pre class="prettyprint source lang-javascript"><code>var ws = require('/lib/wsUtil');

ws.expandClient('hello', hello);

function hello() {
    send(&quot;Hello&quot;);
}</code></pre><p>Use on client side</p>
<pre class="prettyprint source lang-javascript"><code>var ws = new EnonicXP.Ws();
ws.hello();</code></pre><h2>Advanced</h2><p>Extend extensions</p>
<pre class="prettyprint source lang-javascript"><code>var wsl = require('/logger').logger;

wsl.extend({loggerExtension: someExtension});

exports.someExtension = wsl;</code></pre><p>Join extensions</p>
<pre class="prettyprint source lang-javascript"><code>// lib/abExtension.js

var a = require('extensionA').a;
var b = require('extensionB').b;

var exp = {};

for (var name in a) {
    if (a.hasOwnProperty(name) && !b.hasOwnProperty(name)) {
        exp[name] = a[name]; // add whats in a but not b
    }
}

b.extend(exp); // join a with b

exports.ab = b;</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>API</h3><ul><li><a href="server/index.html">Server</a></li><li><a href="client/index.html">Client</a></li></ul>
    <h3><a href="tutorial.html">Tutorial</a></h3><h3><a href="extensions.html">Creating extensions</a></h3>
</nav>

<br class="clear">
<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Oct 05 2017 12:45:29 GMT+0200 (CEST)
</footer>


<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>